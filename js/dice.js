/*
* grrd's Dice
* Copyright (c) 2015 Gerard Tyedmers, grrd@gmx.net
* Licensed under the MPL License
*/
!function(){"use strict";function a(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null!==d?d[1]:!1}function b(){var a;if(!oa||!_){for(Oa.popup("close"),Pa.popup("close"),Da.hide(),Ba.hide(),a=0;na>a;a+=1)ba[a]||(N[a]=Math.round((N[a]+30*Math.random()-15)/Math.PI*2)*Math.PI/2,Q[a]=Math.round((Q[a]+30*Math.random()-15)/Math.PI*2)*Math.PI/2,T[a]=Math.round((T[a]+30*Math.random()-15)/Math.PI*2)*Math.PI/2);_=!0}}function c(){var a,b;if(ja=$(window).height(),ka=$(window).width(),ya=window.innerWidth/2,za=window.innerHeight/2,ja>ka){if(ia=ja/7,Ha.attr("style","position:absolute; top:"+(za-2.4*ia)+"px; left:"+(ya-1.4*ia)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock3").css("display")),Ea.attr("style","position:absolute; top:"+(za-2.4*ia)+"px; left:"+(ya+.4*ia)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock0").css("display")),Ga.attr("style","position:absolute; top:"+(za-ia/2)+"px; left:"+(ya-ia/2)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock2").css("display")),Ia.attr("style","position:absolute; top:"+(za+1.3*ia)+"px; left:"+(ya-1.4*ia)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock4").css("display")),Fa.attr("style","position:absolute; top:"+(za+1.3*ia)+"px; left:"+(ya+.4*ia)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock1").css("display")),$("#img_title").attr("style","width:100%;margin-top:-10px;"),$("#img_title2").attr("style","width:100%;margin-top:-20px;"),$("#img_title3h").show(),$("#img_title3q").hide(),Ka.css({width:"100%",position:"absolute",bottom:"0","margin-bottom":"16px"}),La.css({width:ka/2-16+"px",height:""}),Na.css({width:ka/2-16+"px",height:""}),$("#bt_dice_pad").attr("style",""),$("#bt_yahtzee_pad").attr("style",""),void 0!==M[0]&&null!==M[0])switch(na){case 1:M[0].position.set(0,0,0),E.position.set(0,0,2.2);break;case 2:M[0].position.set(0,.45,0),M[1].position.set(0,-.45,0),E.position.set(0,0,3);break;case 3:M[0].position.set(0,.9,0),M[1].position.set(0,0,0),M[2].position.set(0,-.9,0),E.position.set(0,0,4.2);break;case 4:M[0].position.set(.45,.45,0),M[1].position.set(-.45,.45,0),M[2].position.set(.45,-.45,0),M[3].position.set(-.45,-.45,0),E.position.set(0,0,4.2);break;case 5:M[0].position.set(.45,.9,0),M[1].position.set(.45,-.9,0),M[2].position.set(0,0,0),M[3].position.set(-.45,.9,0),M[4].position.set(-.45,-.9,0),E.position.set(0,0,5.6)}}else if(ia=ja/6,Ha.attr("style","position:absolute; top:"+(za-1.7*ia)+"px; left:"+(ya-2.8*ia)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock3").css("display")),Ea.attr("style","position:absolute; top:"+(za-1.7*ia)+"px; left:"+(ya+1.8*ia)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock0").css("display")),Ga.attr("style","position:absolute; top:"+(za-ia/2)+"px; left:"+(ya-ia/2)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock2").css("display")),Ia.attr("style","position:absolute; top:"+(za+.6*ia)+"px; left:"+(ya-2.8*ia)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock4").css("display")),Fa.attr("style","position:absolute; top:"+(za+.6*ia)+"px; left:"+(ya+1.8*ia)+"px; pointer-events:none; width:"+ia+"px; height:"+ia+"px; display:"+$("#img_lock1").css("display")),$("#img_title").attr("style","width:calc(46% - 15px);margin-bottom:20px;"),$("#img_title2").attr("style","width:calc(31% - 10px);margin-top:0px;margin-bottom:20px;margin-left:20px;"),$("#img_title3h").hide(),$("#img_title3q").show(),Ka.css({width:"100%",position:"absolute","margin-bottom":(ja-.2*ka-100)/3.5+"px",bottom:"0"}),La.css({width:ka/2-16+"px",height:Math.max((ja-.2*ka-100)/2,40)+"px"}),Na.css({width:ka/2-16+"px",height:Math.max((ja-.2*ka-100)/2,40)+"px"}),$("#bt_dice_pad").attr("style","padding-top:"+Math.max((ja-.2*ka-200)/4,0)+"px;"),$("#bt_yahtzee_pad").attr("style","padding-top:"+Math.max((ja-.2*ka-200)/4,0)+"px;"),void 0!==M[0]&&null!==M[0])switch(na){case 1:M[0].position.set(0,0,0),E.position.set(0,0,1.8);break;case 2:M[0].position.set(.45,0,0),M[1].position.set(-.45,0,0),E.position.set(0,0,2.2);break;case 3:M[0].position.set(.9,0,0),M[1].position.set(0,0,0),M[2].position.set(-.9,0,0),E.position.set(0,0,3);break;case 4:M[0].position.set(.45,.45,0),M[1].position.set(-.45,.45,0),M[2].position.set(.45,-.45,0),M[3].position.set(-.45,-.45,0),E.position.set(0,0,3);break;case 5:M[0].position.set(.9,.45,0),M[1].position.set(.9,-.45,0),M[2].position.set(0,0,0),M[3].position.set(-.9,.45,0),M[4].position.set(-.9,-.45,0),E.position.set(0,0,4)}for(Oa.css("max-width",ka-10+"px"),Pa.css("max-width",ka-10+"px"),Qa.css("max-width",ka-10+"px"),Ra.css("max-width",ka-40+"px"),$("#start").css("width",ka-30+"px"),a=1;6>a;a+=1)$("#radio"+a).attr("style","width:"+(ka-50)/5.3+"px; max-width: 92px;height:"+(ka-50)/5.3+"px; max-height: 92px;"),$("#img_color"+a).css({"max-width":"80px",width:(ka-90)/5.5+"px"}),$("#img_anz"+a).width((ka-10)/5+"px");b=$(".w16"),b.width(Math.min((ka-40)/6.2,80)+"px"),b.height(Math.min((ka-40)/6.2,80)+"px"),setTimeout(function(){b.width(Math.min((ka-40)/6.2,80)+"px"),b.height(Math.min((ka-40)/6.2,80)+"px")},500)}function d(a){var b;if(W=a.clientX-ya,Y=a.clientY-za,!oa||!_)for(b=0;na>b;b+=1)ba[b]||(N[b]=O[b]+.08*(W-X)*P[b],Q[b]=R[b]+.08*(Y-Z)*S[b],T[b]=U[b]+(.08*(W-X)*V[b]+.08*(Y-Z)*V[b])/2)}function e(){var a,b,c,d,e=0;for(a=0;a<da.length;a+=1)da[a]=0;for(a=0;a<ca.length;a+=1){if(da[a]=ca[a]*(a+1),ca[a]>=3&&(da[7]=3*(a+1)),ca[a]>=4&&(da[8]=4*(a+1)),ca[a]>=5&&(da[12]=50),ca[a]>=5&&(da[9]=25),3===ca[a])for(b=0;b<ca.length;b+=1)2===ca[b]&&(da[9]=25);ca[a]>=1?e+=1:e=0,e>=4&&(da[10]=30),e>=5&&(da[11]=40)}for(da[13]=fa,a=0;a<da.length;a+=1)null===ea[sa-1][a]&&(c=$("#bt_"+a+"p"+sa),$("#lb_"+a+"p"+sa).css("display","none"),c.css("display","block"),d=$("#bt_"+a+"p"+sa+" .ui-btn-text"),d.length?d.text(da[a]):c.html(da[a]));Ja.hide(),$.mobile.changePage("#popup_yahtzee",{transition:"pop",role:"dialog"})}function f(){var a;for(a=0;na>a;a+=1)ba[a]||(N[a]=O[a],Q[a]=R[a],T[a]=U[a]);if(1!==ta&&!_)for(ja>ka?(0>W&&Y>ja/15&&(ba[4]=!ba[4],$("#img_lock4").toggle()),W>0&&Y>ja/15&&(ba[1]=!ba[1],$("#img_lock1").toggle()),W>ja/-15&&ja/15>W&&Y>ja/-15&&ja/15>Y&&(ba[2]=!ba[2],$("#img_lock2").toggle()),0>W&&ja/-15>Y&&(ba[3]=!ba[3],$("#img_lock3").toggle()),W>0&&ja/-15>Y&&(ba[0]=!ba[0],$("#img_lock0").toggle())):(0>Y&&W>ja/15&&(ba[0]=!ba[0],$("#img_lock0").toggle()),Y>0&&W>ja/15&&(ba[1]=!ba[1],$("#img_lock1").toggle()),Y>ja/-15&&ja/15>Y&&W>ja/-15&&ja/15>W&&(ba[2]=!ba[2],$("#img_lock2").toggle()),0>Y&&ja/-15>W&&(ba[3]=!ba[3],$("#img_lock3").toggle()),Y>0&&ja/-15>W&&(ba[4]=!ba[4],$("#img_lock4").toggle())),a=0;na>a&&ba[a];a+=1)a===na-1&&e()}function g(){var a;for(a=0;5>a;a+=1)ba[a]=!1,$("#img_lock"+a).hide()}function h(a){var b;if(W=a.clientX-ya,Y=a.clientY-za,D.removeEventListener("mousemove",d,!1),D.removeEventListener("mouseup",i,!1),D.removeEventListener("mouseout",j,!1),!oa||!_){for(Math.abs(W-X)<5&&Math.abs(Y-Z)<5&&oa&&(pa=!0,new Date-H<300&&f()),b=0;na>b;b+=1)ba[b]||(N[b]=Math.round(N[b]/Math.PI*2)*Math.PI/2,Q[b]=Math.round(Q[b]/Math.PI*2)*Math.PI/2,T[b]=Math.round(T[b]/Math.PI*2)*Math.PI/2);_=!0}}function i(a){h(a)}function j(a){h(a)}function k(a){var b;for(Da.hide(),Ba.hide(),a.preventDefault(),D.addEventListener("mousemove",d,!1),D.addEventListener("mouseup",i,!1),D.addEventListener("mouseout",j,!1),X=a.clientX-ya,Z=a.clientY-za,H=new Date,b=0;na>b;b+=1)O[b]=N[b],R[b]=Q[b],U[b]=T[b],b>0&&(P[b]=Math.random()+.5,S[b]=Math.random()+.5,V[b]=Math.random()+.5)}function l(a){var b;if(a.preventDefault(),!oa||!_){for(qa===!1&&oa&&(pa=!0,new Date-H<500&&(W=X,Y=Z,f())),b=0;na>b;b+=1)ba[b]||(N[b]=Math.round(N[b]/Math.PI*2)*Math.PI/2,Q[b]=Math.round(Q[b]/Math.PI*2)*Math.PI/2,T[b]=Math.round(T[b]/Math.PI*2)*Math.PI/2);_=!0}}function m(a){var b;if(qa=!0,1===a.touches.length){if(a.preventDefault(),W=a.touches[0].pageX-ya,Y=a.touches[0].pageY-za,oa&&_)return;for(b=0;na>b;b+=1)ba[b]||(N[b]=O[b]+.06*(W-X)*P[b],Q[b]=R[b]+.06*(Y-Z)*S[b],T[b]=U[b]+(.06*(W-X)*V[b]+.02*(Y-Z)*V[b])/2)}}function n(a){var b;if(H=new Date,qa=!1,1===a.touches.length)for(a.preventDefault(),Da.hide(),Ba.hide(),X=a.touches[0].pageX-ya,Z=a.touches[0].pageY-za,H=new Date,b=0;na>b;b+=1)O[b]=N[b],R[b]=Q[b],U[b]=T[b],b>0&&(P[b]=Math.random()+.5,S[b]=Math.random()+.5,V[b]=Math.random()+.5)}function o(a,b,c,d,e){var f=new THREE.DirectionalLight(d,e);f.position.set(a,b,c),F.add(f),f.castShadow=!0;var g=1;f.shadow.camera.left=-g,f.shadow.camera.right=g,f.shadow.camera.top=g,f.shadow.camera.bottom=-g,f.shadow.camera.near=1,f.shadow.camera.far=4,f.shadow.mapSize.width=1024,f.shadow.mapSize.height=1024,f.shadow.bias=-.005}function p(){E.aspect=window.innerWidth/window.innerHeight,E.updateProjectionMatrix(),G.setSize(window.innerWidth,window.innerHeight)}function q(){Da.hide(),Ba.hide(),D=document.createElement("div"),document.getElementById("dice").appendChild(D),E=new THREE.PerspectiveCamera(35,window.innerWidth/window.innerHeight,1,15),E.position.set(0,0,2.2),F=new THREE.Scene;var a=function(a){if(a.lengthComputable){var b=a.loaded/a.total*100;console.log(Math.round(b,2)+"% downloaded")}},b=function(a){},c=new THREE.MTLLoader;c.setPath("./models/"),c.load("dice.mtl",function(c){c.preload();var d=new THREE.OBJLoader;d.setMaterials(c),d.setPath("./models/"),d.load("dice.obj",function(a){F.add(a),M[0]=a},a,b)}),F.add(new THREE.AmbientLight(7829367)),o(.5,1,-1,16777215,.7),o(-1,1,1,16777215,1),G=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),G.setClearColor(0,0),G.setPixelRatio(window.devicePixelRatio),G.setSize(window.innerWidth,window.innerHeight),G.gammaInput=!0,G.gammaOutput=!0,D.appendChild(G.domElement),D.addEventListener("mousedown",k,!1),D.addEventListener("touchstart",n,!1),D.addEventListener("touchmove",m,!1),D.addEventListener("touchend",l,!1),window.addEventListener("resize",p,!1)}function r(){var b,c;for(ha=0,b=0;na>b;b+=1)M[b].rotation.y+=.05*(N[b]-M[b].rotation.y),M[b].rotation.x+=.05*(Q[b]-M[b].rotation.x),M[b].rotation.z+=.05*(T[b]-M[b].rotation.z),ha=Math.max(ha,Math.abs(M[b].rotation.y-N[b])+Math.abs(M[b].rotation.x-Q[b])+Math.abs(M[b].rotation.z-T[b]));if(.01>ha&&_){for(_=!1,c=0;2>c;c+=1)for(fa=0,ca=[0,0,0,0,0,0],b=0;na>b;b+=1)I=(Math.round(Q[b]%(2*Math.PI)/Math.PI*2)+4)%4,J=(Math.round(N[b]%(2*Math.PI)/Math.PI*2)+4)%4,K=(Math.round(T[b]%(2*Math.PI)/Math.PI*2)+4)%4,aa[b]=0,0===I&&0===J||2===I&&2===J?aa[b]=1:3===I&&1===K||1===I&&3===K||0===I&&1===J&&0===K||2===I&&3===J&&0===K||2===I&&1===J&&2===K||0===I&&3===J&&2===K?aa[b]=2:3===I&&0===K||1===I&&2===K||0===I&&1===J&&3===K||0===I&&3===J&&1===K||2===I&&1===J&&1===K||2===I&&3===J&&3===K?aa[b]=3:1===I&&0===K||3===I&&2===K||0===I&&3===J&&3===K||2===I&&1===J&&3===K||0===I&&1===J&&1===K||2===I&&3===J&&1===K?aa[b]=4:3===I&&3===K||1===I&&1===K||0===I&&3===J&&0===K||2===I&&3===J&&2===K||0===I&&1===J&&2===K||2===I&&1===J&&0===K?aa[b]=5:(0===I&&2===J||2===I&&0===J)&&(aa[b]=6),fa+=aa[b],ca[aa[b]-1]=ca[aa[b]-1]+1;if(oa)va||1!==ta||pa||(Pa.popup("open"),Ma.mousedown(function(a){$(this).off("mousedown"),Pa.popup("close"),k(a)}),Ma.mouseup(function(a){$(this).off("mouseup"),i(a)}),va=!0),pa?pa=!1:ta+=1,Ba.html(ta+" / 3"),Ba.show(),Da.html(navigator.mozL10n.get("lb_player")+" "+sa),ta>3&&e();else{Da.html(fa);var d=a("debug");if(d){var f="";for(b=0;na>b;b+=1)I=(Math.round(Q[b]%(2*Math.PI)/Math.PI*2)+4)%4,J=(Math.round(N[b]%(2*Math.PI)/Math.PI*2)+4)%4,K=(Math.round(T[b]%(2*Math.PI)/Math.PI*2)+4)%4,f=f+""+I+" - "+J+" - "+K+" : "+aa[b]+"<br>";Da.html(f)}}Da.show()}G.render(F,E)}function s(){ma&&(window.requestAnimationFrame(s),r())}function t(){var a;for(Ua.stop(),ma=!1,Da.hide(),Ba.hide(),Ka.show(),$("#grp_anz").hide(),g(),$.mobile.changePage("#title",{transition:"slide",reverse:!0}),a=0;na>a;a+=1)M[a].rotation.y=N[a],M[a].rotation.x=Q[a],M[a].rotation.z=T[a];_=!1}function u(){Ua.start(),ma=!0,s(),xa?(xa=!1,t()):$.mobile.changePage("#dice",{transition:"pop",reverse:!0})}function v(a){var b,c=!1;for(ea[sa-1][a]=da[a],$("#lb_"+a+"p"+sa).html(da[a]),fa=0,b=0;b<da.length;b+=1)$("#bt_"+b+"p"+sa).css("display","none"),$("#lb_"+b+"p"+sa).css("display","inline"),fa+=ea[sa-1][b],5===b&&($("#lb_sum1p"+sa).html(fa),fa>=63&&($("#lb_bonus_p"+sa).html(35),fa+=35),ga=fa,$("#lb_sum2p"+sa).html(fa));for($("#lb_sum3p"+sa).html(fa-ga),$("#lb_sum4p"+sa).html(fa),la[sa-1]=fa,Ja.show(),b=0;b<da.length;b+=1)null===ea[sa-1][b]&&6!==b&&(c=!0);c||sa!==ra?(sa+=1,sa>ra&&(sa=1),ta=1,Ba.html(ta+" / 3"),Da.html(navigator.mozL10n.get("lb_player")+" "+sa),g(),u()):(b=la.indexOf(Math.max.apply(Math,la)),Sa.html(navigator.mozL10n.get("lb_player")+" "+(b+1)+" "+navigator.mozL10n.get("lb_win")),Ta.html(navigator.mozL10n.get("lb_with")+" "+la[b]+" "+navigator.mozL10n.get("lb_pts")),Ra.popup("open"),xa=!0)}function w(){var a,b,c;for(a=0;14>a;a+=1)for(da[a]=0,b=0;5>b;b+=1)ea[b][a]=null,$("#bt_"+a+"p"+(b+1)).css("display","none"),c=$("#lb_"+a+"p"+(b+1)),c.css("display","inline"),c.html("");for(b=0;5>b;b+=1)ra>b?($("#img_p"+(b+1)).attr("style","width:100%; background-color: #CC002F;"),$("#lb_sum1p"+(b+1)).html(0),$("#lb_sum2p"+(b+1)).html(0),$("#lb_sum3p"+(b+1)).html(0),$("#lb_sum4p"+(b+1)).html(0)):($("#img_p"+(b+1)).attr("style","width:100%; background-color: #AAAAAA;"),$("#lb_sum1p"+(b+1)).html(""),$("#lb_sum2p"+(b+1)).html(""),$("#lb_sum3p"+(b+1)).html(""),$("#lb_sum4p"+(b+1)).html("")),$("#lb_bonus_p"+(b+1)).html(""),la[b]=0;sa=1,ta=1,g(),Da.html(navigator.mozL10n.get("lb_player")+" "+sa),Ba.html(ta+" / 3"),Da.show(),Ba.show()}function x(a){oa=a,Aa.html(oa?navigator.mozL10n.get("lb_anz_pl"):navigator.mozL10n.get("lb_anz")),Ka.slideToggle(),setTimeout(function(){$("#grp_anz").slideToggle()},500)}function y(a){M[a]=M[0].clone(),M[a].rotation.y=-Math.PI/2,N[a]=Math.round((N[a]+30*Math.random()-15)/Math.PI*2)*Math.PI/2,Q[a]=Math.round((Q[a]+30*Math.random()-15)/Math.PI*2)*Math.PI/2,T[a]=Math.round((T[a]+30*Math.random()-15)/Math.PI*2)*Math.PI/2,M[a].rotation.y=N[a],M[a].rotation.x=Q[a],M[a].rotation.z=T[a]}function z(a){var b;if(a>na)for(b=na;a>b;b+=1)(void 0===M[b]||null===M[b])&&y(b),F.add(M[b]);if(na>a)for(b=a;na>b;b+=1)F.remove(M[b]);na=a,c()}function A(){c(),$.mobile.changePage("#title",{transition:"pop",reverse:!0})}function B(a){var b=[[[.75,0,.07],[1,1,1]],[[.09,.2,.55],[1,1,1]],[[.9,.5,.005],[1,1,1]],[[.017,.292,.243],[1,1,1]],[[.65,.65,.65],[.06,.06,.06]]],c=$("input:radio[name=color]:checked");ma=!0,oa?(ra=a,z(5),$("input:radio[name=anzahl]").filter("[value=5]").prop("checked",!0),A(),w(),Ca.show()):(z(a),Da.hide(),Ba.hide(),Ca.hide(),g()),Ua.start(),s(),$.mobile.changePage("#dice",{transition:"slide"}),M[0].children[0].material[0].color.setRGB(b[parseInt(c.val())][0][0],b[parseInt(c.val())][0][1],b[parseInt(c.val())][0][2]),M[0].children[0].material[1].color.setRGB(b[parseInt(c.val())][1][0],b[parseInt(c.val())][1][1],b[parseInt(c.val())][1][2])}function C(a){Sa.html(navigator.mozL10n.get(a)),Ta.html(navigator.mozL10n.get(a+"_txt")),Ra.popup("open")}var D,E,F,G,H,I,J,K,L,M=[],N=[0,0,0,0,0],O=[0,0,0,0,0],P=[1,0,0,0,0],Q=[0,0,0,0,0],R=[0,0,0,0,0],S=[1,0,0,0,0],T=[0,0,0,0,0],U=[0,0,0,0,0],V=[1,0,0,0,0],W=0,X=0,Y=0,Z=0,_=!1,aa=[0,0,0,0,0],ba=[!1,!1,!1,!1,!1],ca=[0,0,0,0,0,0],da=[],ea=[];for(L=0;5>L;L+=1)ea[L]=[];var fa,ga,ha,ia,ja,ka,la=[0,0,0,0,0],ma=!1,na=1,oa=!0,pa=!1,qa=!1,ra=2,sa=1,ta=1,ua=!1,va=!1,wa=!1,xa=!1,ya=window.innerWidth/2,za=window.innerHeight/2,Aa=$("#lb_anz"),Ba=$("#lb_try"),Ca=$("#bt_list"),Da=$("#lb_tot_val"),Ea=$("#img_lock0"),Fa=$("#img_lock1"),Ga=$("#img_lock2"),Ha=$("#img_lock3"),Ia=$("#img_lock4"),Ja=$("#div_close_list"),Ka=$("#bt_dice_yahtzee"),La=$("#bt_dice"),Ma=$("#dice"),Na=$("#bt_yahtzee"),Oa=$("#popup_swipe"),Pa=$("#popup_lock"),Qa=$("#popup_web_gl"),Ra=$("#popup_help"),Sa=$("#help_tit"),Ta=$("#help_txt");Ca.click(function(a){$.mobile.changePage("#popup_yahtzee",{transition:"pop",role:"dialog"}),a.preventDefault()}),$("#popup_yahtzee").mousedown(function(){Ra.popup("close")});var Ua=new Shake({threshold:8,timeout:1e3});window.addEventListener("shake",b,!1),$(document).on("pageshow","#dice",function(){ua||(Oa.popup("open"),Ma.mousedown(function(a){$(this).off("mousedown"),Oa.popup("close"),k(a)}),Ma.mouseup(function(a){$(this).off("mouseup"),i(a)}),ua=!0),c(),setTimeout(function(){c()},500)}),$(document).on("pageshow","#popup_yahtzee",function(){Ua.stop(),ma=!1,wa||(Sa.html(navigator.mozL10n.get("lb_help")),Ta.html(""),Ra.popup("open"),wa=!0),c()}),Detector.webgl?q():setTimeout(function(){Qa.popup("open")},500),c(),setTimeout(function(){c()},500),$("#bt_quit").click(function(a){t(),a.preventDefault()}),$("#bt_close_list").click(function(a){u(),a.preventDefault()}),$("[id^=bt_0p]").click(function(a){v(0),a.preventDefault()}),$("[id^=bt_1p]").click(function(a){v(1),a.preventDefault()}),$("[id^=bt_2p]").click(function(a){v(2),a.preventDefault()}),$("[id^=bt_3p]").click(function(a){v(3),a.preventDefault()}),$("[id^=bt_4p]").click(function(a){v(4),a.preventDefault()}),$("[id^=bt_5p]").click(function(a){v(5),a.preventDefault()}),$("[id^=bt_7p]").click(function(a){v(7),a.preventDefault()}),$("[id^=bt_8p]").click(function(a){v(8),a.preventDefault()}),$("[id^=bt_9p]").click(function(a){v(9),a.preventDefault()}),$("[id^=bt_10p]").click(function(a){v(10),a.preventDefault()}),$("[id^=bt_11p]").click(function(a){v(11),a.preventDefault()}),$("[id^=bt_12p]").click(function(a){v(12),a.preventDefault()}),$("[id^=bt_13p]").click(function(a){v(13),a.preventDefault()}),$(window).resize(function(){c(),setTimeout(function(){c()},500)}),La.click(function(a){x(!1),a.preventDefault()}),Na.click(function(a){x(!0),a.preventDefault()}),$("#bt_closeSettings").click(function(a){A(),a.preventDefault()}),$("[id^=bt_anz]").click(function(a){B(Number($(this).attr("id").slice(-1))),a.preventDefault()}),$(".help").click(function(a){C($(this).attr("id")),a.preventDefault()}),navigator.mozL10n.ready(function(){var b=a("lang");b&&b!==navigator.mozL10n.language.code&&(navigator.mozL10n.language.code=b)})}();